<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Competitive Landscape Cable Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
        }
        
        #map {
            width: 100%;
            height: 100vh;
            background: #e8e8e8;
        }
        
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-size: 18px;
            z-index: 1000;
        }
        
        .legend {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            z-index: 1000;
            max-height: 80vh;
            overflow-y: auto;
            min-width: 200px;
            display: none;
        }
        
        .legend h3 {
            margin: 0 0 10px 0;
            font-size: 15px;
            color: #333;
        }
        
        .cable-item {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
            cursor: pointer;
            padding: 3px 5px;
            border-radius: 3px;
            transition: background-color 0.2s;
        }
        
        .cable-item:hover {
            background-color: #f0f0f0;
        }
        
        .cable-item.hidden {
            opacity: 0.4;
        }
        
        .cable-color {
            width: 18px;
            height: 3px;
            margin-right: 8px;
            border-radius: 2px;
        }
        
        .cable-name {
            font-size: 13px;
            color: #444;
            line-height: 1.2;
        }
        
        /* Custom tooltip styles */
        .leaflet-tooltip.cable-tooltip {
            background: rgba(0, 0, 0, 0.9);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 13px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .leaflet-tooltip.landing-tooltip {
            background: white;
            color: #333;
            padding: 8px 12px;
            border: 1px solid #ddd;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        .map-tiles-inverted {
            filter: invert(-0.3) contrast(1.5) brightness(1.2);
        }
        .landing-name {
            font-weight: bold;
            font-size: 13px;
        }
        
        .landing-country {
            color: #666;
            font-size: 11px;
            margin-top: 2px;
        }
        .triangle-marker {
            background: none !important;
            border: none !important;
            box-shadow: none !important;
        }
        /* Landing point label styles */
        .landing-label {
            color: #2d00c8;
            font-size: 10px;
            font-weight: 500;
            background: none;
            border: none;
            box-shadow: none;
            white-space: nowrap;
        }
        /* Bigger labels for major cities */
        .landing-label.major-city {
            font-size: 14px;
            font-weight: 600;
        }
        /* Override Leaflet's default tile background */
        .leaflet-container {
            background: #e8e8e8;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="loading">Loading map...</div>
    <div class="legend" id="legend">
        <h3>Competitive Landscape</h3>
        <div id="cable-list"></div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.antimeridian@3.1.0/antimeridian.js"></script>
    <script>
        // Wait for everything to load
        window.addEventListener('load', function() {
            // Check if Leaflet loaded
            if (typeof L === 'undefined') {
                document.getElementById('loading').innerHTML = 'Error: Leaflet failed to load. Please check your internet connection.';
                return;
            }
            
            console.log('Leaflet loaded successfully');
            initializeEverything();
        });
        
        function initializeEverything() {
            // Hide loading message
            document.getElementById('loading').style.display = 'none';
            
            // Show legend
            document.getElementById('legend').style.display = 'block';
            
            // Initialize the map
            const map = L.map('map', {
                center: [20, 0],
                zoom: 1,
                minZoom: 2,
                maxZoom: 8,
                worldCopyJump: true
            });

            // Add a light grey base map with no labels
            // Add ESRI gray canvas (very minimal)
            L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
                attribution: 'Tiles &copy; Esri',
                maxZoom: 16,
                continuousWorld: true,
                noWrap: false,
                bounds: [[-90, -270], [90, 270]]
            }).addTo(map);
            // Store all cable layers
            const cableLayers = {};
            
            // ============================================
            // CABLE DATA
            // ============================================
            
            const cables = [
                {
                    "type": "Feature",
                    "properties": {
                        "id": "apricot",
                        "name": "Apricot (Planned)",
                        "color": "#d97559"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[103.64609081207688,1.338585852071497],[103.83750067588413,1.182753739294242],[104.02421554420971,1.202092036773615],[104.14960045538582,1.18452336036332],[104.17500043679628,1.018409236452146],[104.2875003576961,0.962292662396848],[104.40000027800004,0.849806826211382],[104.8499999592161,0.68107206531244],[106.19999900286416,-0.331409329660265],[109.12499692898021,-3.029995968008661],[109.79999645080431,-3.479268678970064],[112.0499948586722,-4.60145376483711],[114.60984933620142,-5.273944363641298],[116.80810148738884,-4.179995582158629],[117.7124908479029,-2.730375485267853],[117.96440181128685,-1.51533365197483],[118.76628430204579,-0.810555324740758],[119.47498959873617,0.568578852526193],[119.69998943934421,1.018534216615524],[120.59998880177636,1.580886840914131],[124.19998625090851,3.41655961832325],[126.57346403647036,5.404676658378629],[128.24998338185245,7.447522319872199],[127.34998401942048,11.882475268284509],[125.54998529455636,16.24638821747719],[126.44998465639262,18.251816319028222],[127.34998401942048,19.24608308700458],[130.94998146974444,20.796306105108872],[138.59997605041642,23.7112581424843],[139.72497525286053,24.94136317175375],[140.84997445649643,30.901396088515508],[141.07497429710446,32.43331330641721],[140.96247437680054,33.93964008831966],[140.56872465573645,34.405022750715936],[140.37184979460858,34.69072647741027],[140.1046624838865,34.852445708846155],[139.9609790000003,34.9740779999996]],[[126.44998465639262,18.251816319028222],[131.39998115096031,17.395022634700517],[138.59997605041642,15.669513225155248],[143.09997286257644,13.92930384327183],[143.9999722250084,13.601498202276586],[144.65753175859138,13.385305518498077]],[[127.34998401942048,19.24608308700458],[125.99998497636834,21.32123529551186],[124.14876628719325,23.757798070792454],[122.84998720785636,24.63495976683041],[121.80144795065142,24.863504112487785]],[[125.54998529455636,16.24638821747719],[123.52498672908439,15.597287859114385],[121.94998784542422,15.669513225155248],[121.56018812156209,15.761539465842137]],[[126.57346403647036,5.404676658378629],[126.3374847366844,5.659359572411489],[126.11248489607637,5.957818681088533],[125.61287587559997,7.079988883160643]],[[109.12499692898021,-3.029995968008661],[107.88749780742415,-4.60145376483711],[107.43749812620827,-5.273944363641298],[107.12099835041957,-5.981154260263285]],[[104.17500043679628,1.018409236452146],[104.11887547655554,1.018409236452146],[104.0166370000003,1.066798000000349]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "asia-direct-cable-adc",
                        "name": "Asia Direct Cable (ADC)",
                        "color": "#c94450"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[139.97546699999984,35.005433000000174],[140.1749749340766,34.89859296336222],[140.3437248145325,34.69072647741027],[140.51247469558447,34.405022750715936],[140.84997445649643,33.93964008831966],[140.84997445649643,32.43331330641721],[140.39997477528055,30.901396088515508],[138.82497589102445,28.161052262220792],[137.24997700676838,26.562513149236715],[132.74998019460836,23.50508968095737],[130.94998146974444,22.677206196582915],[125.99998497636834,21.111485983488812],[122.84998720785636,20.269544035929588],[121.04998848299225,20.05833455139623],[120.14998912056028,20.05833455139623],[116.99999135204831,19.316876111628712],[115.19999262718419,18.251816319028222],[114.29999326356042,14.801154224791581],[113.17499406171221,12.615395567393394],[112.16249477897614,9.967915186974132],[110.92499565563222,7.744889052551447],[107.99999772772827,5.398081130463647],[105.74999932164808,4.389285926050993],[104.68125007876004,2.817450442654169],[104.3161753373827,1.468426767331968],[104.20615041532531,1.341894944206377],[103.91973061822782,1.228443589211858],[103.64609081207688,1.338585852071497]],[[107.99999772772827,5.398081130463647],[105.29999964043219,6.405200795356032],[103.27500107496003,7.744889052551447],[100.80000282767627,9.52441134501949],[100.12500330585216,11.294709319565477],[100.23750322675217,12.175887185507976],[100.57500298647233,12.834868817846521],[100.93057273577533,13.174371211662239]],[[113.17499406171221,12.615395567393394],[112.94999422110418,12.834868817846521],[111.59999517745614,13.492128176464083],[110.02499629320025,13.820086409698062],[109.21959686375268,13.782910441432074]],[[115.19999262718419,18.251816319028222],[114.52499310536027,20.796306105108872],[114.20292333351767,22.22205041973683]],[[116.99999135204831,19.316876111628712],[117.22499119206026,19.95262290516439],[117.22499119206026,20.796306105108872],[116.99999135204831,22.469443964829516],[116.67753158048176,23.355006811273547]],[[114.29999326356042,14.801154224791581],[116.99999135204831,13.710817738179635],[118.79999007691224,13.492128176464083],[120.14998912056028,13.492128176464083],[121.06600847164388,13.762418337904428]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "asia-link-cable-alc",
                        "name": "Asia Link Cable (ALC, Planned)",
                        "color": "#4a95a8"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[114.97499278657615,18.265170800514795],[116.99999135204831,18.038005439608753],[119.92498927995224,16.857467609772335],[120.35483897484683,16.830716773770945]],[[114.7499929453724,17.12195969020027],[116.99999135204831,16.857467609772335],[119.92498927995224,16.749771315644697],[120.35557897432248,16.51402516186766]],[[114.7499929459683,19.104405475930452],[113.84999358353615,18.678647022154717],[111.09966159348336,18.505614628693614],[110.0493762753333,18.389897000000236]],[[111.14999549624025,7.744889052551447],[112.94999422050827,5.883218793719735],[114.29999326475222,5.174038327226071],[114.88563284987971,4.926762452886689]],[[114.07499342354828,14.801154224791581],[109.79999645259221,15.994209911785974],[108.89999709016024,16.10232559580297],[108.19247759137373,16.043393005208348]],[[104.11414047991015,1.925884465105483],[104.32889093295785,2.027683761259223],[104.66056009282137,1.961481175550864]],[[114.20292333351767,22.22205041973683],[114.41249318505615,20.796306105108872],[114.7499929459683,19.104405475930452],[114.97499278657615,18.265170800514795],[114.7499929453724,17.12195969020027],[114.07499342354828,14.801154224791581],[113.39999390232026,12.615395567393394],[112.38749461958417,9.967915186974132],[111.14999549624025,7.744889052551447],[107.99999772772827,5.286069860821008],[107.09999836529612,4.725718053703611],[105.74999932164808,3.940475772228814],[104.90624991936826,2.803404866588448],[104.66056009282137,1.961481175550864],[104.47058772799548,1.468426767331968],[104.28790035741287,1.299801162778933],[104.19209042528557,1.26242303552454],[103.98701057056589,1.389451396800233]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "asia-pacific-gateway-apg",
                        "name": "Asia Pacific Gateway (APG)",
                        "color": "#8c5894"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[103.98701057056589,1.389451396800233],[104.18740042860793,1.302655424517022],[104.48462521805108,1.468426767331968],[105.29999964043219,2.367912558705407],[106.19999900286416,4.613591578862773],[106.19999900286416,5.510071711803246]],[[103.38789161939158,4.128192842398844],[103.95000059678415,3.940475772228814],[106.19999900286416,5.510071711803246],[107.99999772772827,6.852191098754328],[111.03749557593613,9.967915186974132],[112.0499948586722,12.615395567393394],[113.84999358353615,18.251816319028222],[116.99999135204831,19.740987365524937],[120.14998912056028,20.375041253465433],[121.04998848299225,20.58581909604039],[122.84998720785636,21.006499845176737],[124.6499859327203,22.05298561667754],[125.54998529515227,24.12261698700344],[125.9437350162162,25.55188275942587],[126.3374847372803,26.1593079707739],[127.57498386062441,28.55704546571133],[127.79998370123228,29.540507745394493],[128.69998306366443,30.5144959597591],[130.49998178852834,30.320465424761444],[132.74998019460836,30.126049846722832],[134.99997860068837,30.5144959597591],[136.7999773255523,31.286738814391754],[138.59997605041642,32.43331330641721],[139.49997541284839,33.93964008831966],[140.00622505421643,34.405022750715936],[140.09059999384857,34.69072647741027],[140.11872497392463,34.89859296336222],[139.97546699999984,35.005433000000174]],[[128.69998306366443,30.5144959597591],[128.69998306366443,31.670513047087127],[128.92498290427227,32.8123187832876],[129.1499827448803,34.31215165223547],[128.99949285148878,35.17037876180022]],[[113.84999358353615,18.251816319028222],[113.84999358353615,20.796306105108872],[114.2586832940168,22.31829267897149]],[[107.99999772772827,6.852191098754328],[105.29999964043219,7.075530930004602],[103.04883123518101,7.228431783286316],[101.70000219070414,7.187160551695455],[100.5951029728293,7.198818071264419]],[[112.0499948586722,12.615395567393394],[111.59999517745614,13.054150695298627],[110.69999581502417,14.801154224791581],[109.79999645259221,15.56116563526334],[108.89999709016024,15.886035719079029],[108.19247759137373,16.043393005208348]],[[136.7999773255523,31.286738814391754],[137.24997700676838,32.8123187832876],[136.87399727311598,34.33682825203173]],[[127.79998370123228,29.540507745394493],[125.99998497636834,30.708139993541643],[124.19998625150441,31.478822672736147],[122.84998720785636,31.766210259727007],[121.94998784542422,31.670513047087127],[121.39529823837174,31.619800328867754]],[[121.92508786246776,30.86475026744717],[122.17498768603225,30.80481662242606],[124.19998625150441,30.126049846722832],[125.54998529515227,29.540507745394493],[127.57498386062441,28.55704546571133]],[[125.54998529515227,24.12261698700344],[122.84998720785636,24.83931282559271],[122.17498768603225,24.89034854048814],[121.80144795065142,24.863504112487785]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "asia-america-gateway-aag-cable-system",
                        "name": "Asia-America Gateway (AAG) Cable System",
                        "color": "#6873a0"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[107.07919838003114,10.342138429683002],[107.77499788712005,9.746236973759974],[108.6749972495522,9.52441134501949],[110.24999613380828,9.746236973759974],[110.69999581502417,9.967915186974132]],[[109.34999677137613,7.29876275445952],[112.94999422050827,5.659359572411489],[114.29999326475222,5.061986954416114],[114.88563284987971,4.926762452886689]],[[179.99992672230314,19.104405475930452],[160.19996074878455,16.534196198259725],[151.1999671244645,15.23578178303578],[147.14996999352056,14.365653759228442],[146.24997063108842,14.147583506948735],[145.34997126865645,13.54681947716878],[144.89997158744055,13.327979290563553],[144.809541651502,13.549094363148988],[143.9999722250084,13.492128176464083],[143.09997286257644,13.710817738179635],[138.59997605041642,14.801154224791581],[131.39998115096031,16.534196198259725],[125.99998497636834,18.251816319028222],[122.39998752664029,18.891661584303154],[121.04998848299225,19.104405475930452],[120.37498896116831,18.678647022154717],[120.14998912056028,16.965102599435927],[120.38973895071938,16.582592330693284],[119.92498927995224,16.965102599435927],[116.99999135204831,18.251816319028222],[115.3124925474883,19.529070924350908],[114.52499310536027,20.375041253465433],[113.79374362338419,21.635297384859552],[113.94911351331866,22.271493895850078],[113.73749366323221,21.635297384859552],[113.51249382262418,20.796306105108872],[113.39999390232026,18.251816319028222],[111.14999549624025,12.615395567393394],[110.69999581502417,9.967915186974132],[109.34999677137613,7.29876275445952],[107.99999772772827,5.957818681088533],[106.64999868408005,5.061986954416114],[105.74999932164808,4.613591578862773],[103.85068066714335,2.29570245694968],[104.40000027800004,2.255504211923801],[104.77306230253555,1.961481175550864],[104.68115007883117,1.468426767331968],[104.28790035741287,1.215621515287768],[104.15439045199251,1.197800481146747],[103.98701057056589,1.389451396800233]],[[100.93057273577533,13.174371211662239],[100.68750290737216,12.834868817846521],[100.46250306616822,12.175887185507976],[100.3500031464602,11.294709319565477],[101.02500266828413,9.52441134501949],[103.27500107496003,7.967776882259704],[105.29999964043219,6.628746603597807],[107.99999772772827,5.957818681088533]],[[-179.99979825051412,19.104405475930452],[-172.79980335105813,20.796306105108872],[-163.799809726738,20.796306105108872],[-158.849813233362,21.111485983488812],[-158.3998135521461,21.478351011075993],[-158.24204999203212,21.54876173571662],[-158.34356194506245,21.73983373091106],[-158.2873136318419,22.05298561667754],[-157.94981387092994,22.469443964829516],[-152.99981737755394,24.94136317175375],[-147.6030982105313,28.1630268819071],[-138.60310458621126,29.738014316088],[-127.79983522945767,32.43331330641721],[-122.39983905486586,34.867831005273345],[-120.8472016490899,35.367078251717096]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "bifrost",
                        "name": "Bifrost (Planned)",
                        "color": "#939597"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[-120.62152181466479,35.12094936772415],[-122.84983873608158,35.05222991093673],[-129.5998339543217,38.29952060596925],[-138.5998275786419,40.38732029077508]],[[144.5624718259325,13.92930384327183],[143.9999722250084,13.273238157547594],[137.24997700676838,11.735650161405832],[133.19997987582445,9.967915186974132],[129.59998242550049,7.893494252945166],[126.44998465698852,5.659359572411489],[124.19998625090851,3.865649782482034],[120.59998880177636,2.367912558705407],[119.24998975693651,1.018534216615524],[119.02498991513632,0.568578852526193],[118.31629235168833,-0.810555324740758],[117.85190631946367,-1.290401396141605],[117.73941082764067,-1.51533365197483],[117.48749100610306,-2.730375485267853],[116.58310164737706,-4.179995582158629],[114.67992114108486,-5.049857167366764],[112.0499948586722,-4.37714437553184],[110.02499629200844,-3.479268678970064],[109.34999677018433,-3.029995968008661],[106.31249892316808,-0.331409329660265],[105.63749940134416,0.118588418888312],[104.8499999592161,0.568578852526193],[104.17500043739219,0.685071778220519],[103.89375063663218,0.793562652607196],[103.89375063663218,1.018534216615524],[103.64609081207688,1.338585852071497]],[[179.99994672169302,27.097918575215974],[173.6999511846689,25.484199086872454],[160.19996074818866,22.191942630775465],[151.1999671244645,18.678647022154717],[145.79997094927663,16.24638821747719],[144.67497174623662,14.365653759228442],[144.5624718259325,13.92930384327183],[144.77675167413477,13.490037504527912]],[[124.19998625090851,3.865649782482034],[124.64998593331639,1.805788280129153],[124.8396357983706,1.490779296094715]],[[126.44998465698852,5.659359572411489],[126.2249848157844,5.957818681088533],[125.61287587559997,7.079988883160643]],[[109.34999677018433,-3.029995968008661],[107.99999772772827,-4.60145376483711],[107.5499980465122,-5.273944363641298],[106.82782855810404,-6.171876390816321]],[[-122.84983873608158,35.05222991093673],[-121.9498393748416,34.31215165223547],[-120.59984033000157,33.565491482352044],[-117.44984256148977,32.33831157801293],[-117.06378442547147,32.3575986746028]],[[-123.97340935607642,45.14659036063931],[-125.09983714216159,44.53466416326733],[-129.5998339543217,43.073310783003215],[-138.5998275786419,40.38732029077508],[-151.1998186532859,37.70855130533492],[-163.79980972733406,34.063992930126034],[-172.79980979028863,30.255702942039875],[-179.99980039712295,27.097918575215974]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "echo",
                        "name": "Echo (Planned)",
                        "color": "#c15478"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[-124.15955921950356,40.803253108521126],[-139.05018102509484,39.00237890905839],[-151.1998186532859,36.993119919861876],[-163.79980972733406,33.31515395812905],[-172.79980979028863,29.47523619496653],[-179.99980039712295,26.29386583975231]],[[179.99994672169302,26.29386583975231],[173.6999511846689,24.669041914124236],[160.19996074818866,21.356164482330126],[151.1999671244645,17.82393441253792],[145.79997094927663,15.813887260619625],[143.88747230410857,13.965698203819535],[143.54997254319662,13.419186961310027],[137.24997700676838,9.52441134501949],[133.64997955704033,7.744889052551447],[133.19997987582445,7.29876275445952],[130.49998178793246,3.865649782482034],[129.59998242550049,1.618372199773176],[128.69998306306852,-1.981015190984684],[128.0249835412444,-2.880195580251407],[127.34998401942048,-4.676208028751072],[123.74998656969242,-6.467627592690688],[120.14998911996437,-6.467627592690688],[116.58310164737706,-4.852974874840906],[114.7499929459683,-4.825692499217419],[112.0499948586722,-4.152767748013638],[110.24999613321238,-3.479268678970064],[109.57499661138827,-3.029995968008661],[106.53749876377611,-0.331409329660265],[105.29999964043219,0.906050180869095],[104.8499999592161,1.187252773694101],[104.62500011860807,1.250557147797234],[104.28790035741287,1.299826156329162],[104.18975042694323,1.31015097035863],[103.98701057056589,1.389451396800233]],[[109.57499661138827,-3.029995968008661],[108.1124976480322,-4.60145376483711],[107.66249796681612,-5.273944363641298],[107.12099835041957,-5.981154260263285]],[[133.64997955704033,7.744889052551447],[134.09997923706462,7.521883237406507],[134.5609408257699,7.531746239289517]],[[143.88747230410857,13.965698203819535],[144.22497206442463,13.710817738179635],[144.69470173285575,13.464772962370143]],[[144.65753175859138,13.385305518498077],[143.9999722250084,13.3827080361257],[143.54997254319662,13.419186961310027]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "india-asia-xpress-iax",
                        "name": "India Asia Xpress (IAX) 1, 2",
                        "color": "#d4a843"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[81.13951857354486,16.175049115204825],[82.01872118892727,15.044700164166894],[81.82223885811331,11.127589656424089]],[[87.50654093847432,21.613825026350842],[88.64575957688014,2.546897235759658]],[[72.87590151562159,19.066189490208128],[71.32502370862383,16.965102599435927],[71.04513590397801,13.492128176464083],[72.50491087570272,9.361978911833972],[74.70002131774494,6.688675551202349],[75.37502083897188,5.659359572411489],[78.3000187674719,3.715978119298069],[79.65001781052403,3.191933974144809],[81.00001685476798,2.817450442654169],[85.500013666928,1.918228780215599],[90.00001047908802,2.817450442654169],[92.70000856638391,4.613591578862773],[94.27500745064,5.510071711803246],[95.40000665368001,6.069699469736006],[97.42500521915215,5.622041180883233],[98.10000474097609,5.286069860821008],[98.88750418310413,4.613591578862773],[100.01250338614413,3.266814816815666],[101.25000250948806,2.143087178471855],[102.15000187192003,1.805788280129153],[102.68279723997186,1.558264177552469],[103.34065102845322,1.383978004154865],[103.50000091556807,1.327518855965853],[103.64609081207688,1.338585852071497]],[[79.65001781052403,3.191933974144809],[80.43751725265209,5.435413643888211],[80.53985718074962,5.940820740520149]],[[98.10000474097609,5.286069860821008],[99.00000410340806,5.957818681088533],[100.06611334816643,6.613518860854109]],[[101.25000250948806,2.143087178471855],[101.41875238934823,2.592701464601932],[101.44360237174425,2.751228763607222]],[[75.37502083897188,5.659359572411489],[74.25002163652778,4.613591578862773],[73.54035213926461,4.212345781871782]],[[85.500013666928,1.918228780215599],[83.92501477969205,5.510071711803246],[83.2500152596562,7.744876956882131],[82.80001557844011,9.52441134501949],[81.45001653598388,11.735650161405832],[80.24298739105474,13.06385310188338]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "mist",
                        "name": "MIST",
                        "color": "#c96660"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[81.00001685476798,3.042156042425856],[82.57501573902388,5.510047410567148],[82.80001557963192,7.744876956882131],[82.35001589841602,9.52441134501949],[81.45001653598388,11.294709319565477],[80.24298739105474,13.06385310188338]],[[72.87590260996693,19.07607425728523],[71.55002354923187,16.965102599435927],[71.49513558519409,13.492128176464083],[72.900022592881,9.443204702286902],[75.09513303492322,6.770440250104527],[78.69513048465001,3.940475772228814],[79.65001781052403,3.41655961832325],[81.00001685476798,3.042156042425856],[85.500013666928,2.817450442654169],[90.00001047908802,3.715978119298069],[92.70000856638391,4.837826391986557],[94.27500745064,5.733989114150127],[95.40000665368001,6.18155703253704],[97.42500521915215,5.845915088460266],[98.32500458158412,5.286069860821008],[99.11250402371216,4.613591578862773],[100.12500330644806,3.266814816815666],[101.25000250948806,2.19929675402769],[102.15000187192003,1.918228780215599],[102.68279723997186,1.614492576237963],[103.34065102845322,1.412069619499378],[103.50000091556807,1.38372807724675],[103.64609081207688,1.338585852071497]],[[97.42500521915215,5.845915088460266],[99.00000410340806,6.405200795356032],[100.06611334816643,6.613518860854109]],[[101.25000250948806,2.19929675402769],[101.36250242919627,2.592701464601932],[101.44360237174425,2.751228763607222]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "sea-us",
                        "name": "SEA-US",
                        "color": "#749d71"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[-118.39945344493313,33.862474868985494],[-120.59984033000157,33.189714664600466],[-122.3998390548656,33.189714664600466],[-127.79983522945767,32.8123187832876],[-138.60310458621126,30.516425505901374],[-147.6030982105313,28.953514579902283],[-152.99981737755394,25.75470426341523],[-157.94981387092994,22.677206196582915],[-158.39981355214593,22.05298561667754],[-158.45606295953138,21.73983373091106],[-158.456063506614,21.635297384859552],[-158.22066328843266,21.4634468234482],[-158.3998135521461,21.268825931479064],[-158.849813233362,21.006499845176737],[-163.799809726738,19.95262290516439],[-172.79980335105813,19.95262290516439],[-179.99979825051412,18.251816319028222]],[[137.24997700676838,10.85308969074528],[137.69997668798445,9.967915186974132],[138.06149986937797,9.443922836169385]],[[133.19997987582445,9.08033076823294],[133.64997955704033,8.190543417795496],[134.5609408257699,7.531746239289517]],[[125.61287587559997,7.079988883160643],[125.99998497636834,5.957818681088533],[126.44998465758441,5.061986954416114]],[[125.06561063828791,1.378623021535939],[125.99998497636834,1.918228780215599],[126.44998465758441,3.266814816815666],[126.44998465758441,5.061986954416114],[133.19997987582445,9.08033076823294],[137.24997700676838,10.85308969074528],[143.9999722250084,13.054150695298627],[144.69469829535797,13.464777824933044]],[[144.69470173285575,13.464772962370143],[144.89997158744055,13.273238157547594],[145.34997126865645,13.492128176464083],[146.24997063108842,14.038469666260218],[147.14996999352056,14.147583506948735],[151.1999671244645,14.365653759228442],[160.19996074878455,15.669513225155248],[179.99992672230314,18.251816319028222]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "seamewe-4",
                        "name": "SeaMeWe-4",
                        "color": "#507e9a"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[101.25000250948806,2.480311786858737],[101.70000219070414,2.367912558705407],[102.220901821694,2.273260323566543]],[[66.60002705585578,19.95262290516439],[66.37502721524774,20.375041253465433],[66.60002705585578,23.298598065875897],[67.02854675228855,24.889731701235817]],[[91.99482906593992,21.42927456664916],[91.80000920395213,19.95262290516439],[88.20001175422391,13.492079936238724]],[[79.87208765380376,6.927036656836354],[79.4250179705119,5.957818681088533],[78.46194979910258,4.807252410277582]],[[103.64609081207688,1.338585852071497],[103.50000091556807,1.229280895999666],[103.34065102845322,1.299701188578927],[102.68279723997186,1.698782263242901],[102.15000187192003,2.03066189047467],[101.25000250948806,2.480311786858737],[100.46250306736002,3.266814816815666],[99.7875035455361,4.613591578862773],[99.00000410340806,5.286069860821008],[97.42500521915215,6.405200795356032],[95.40000665368001,8.190543417795496],[93.14492825119876,9.52441134501949],[91.80000920395213,10.41081650540272],[90.00001047908802,12.395734000022975],[88.20001175422391,13.492079936238724],[83.70001494206389,13.929255692764443],[81.45001653598388,13.273238157547594],[80.24298739105474,13.06385310188338],[81.45001653598388,11.073982781226615],[82.1250160560201,9.52441134501949],[82.575015737236,7.744852765542954],[82.35001589841602,5.51002310933014],[81.00001685476798,4.613591578862773],[78.69513048465001,4.613591578862773],[76.39024411453221,6.852191098754328],[74.19513367248999,9.52441134501949],[72.84513462884213,13.492128176464083],[72.2250230710558,16.965102599435927],[72.87590260996693,19.07607425728523]],[[7.755438741914387,36.90282046530194],[7.875068657167333,37.23235432155614],[7.987568577471261,37.94551049545967],[8.10006849777537,38.38775473578444]],[[9.867357245811593,37.276816253475154],[9.675067382031267,37.589786573603064],[9.000067859611436,38.38775473578444]],[[13.358654772543574,38.11612161658339],[13.05006499115128,38.38775473578444],[12.600065309935387,38.51986519151931],[12.150065628719313,38.38775473578444],[10.348617229769278,38.38775473578444],[9.000067859611436,38.38775473578444],[8.10006849777537,38.38775473578444],[7.650068816559295,38.651811712711336],[6.187569852607326,41.74435878948223],[5.372530429989069,43.29362778902908]],[[39.18275647850768,21.481533475502996],[39.26254642198353,20.375041253465433],[40.61254546563157,18.251816319028222],[41.62504474836765,16.534196198259725],[42.4125441904955,14.801154224791581],[42.918793831863546,13.92930384327183],[43.20004363262354,13.054150695298627],[43.31254355292765,12.834868817846521],[43.39691849315569,12.615395567393394],[43.81879319429551,12.395734000022975],[44.55004267627159,12.120896898039394],[45.450042038703735,12.395734000022975],[48.60003980721571,13.163718917913586],[55.35003502545574,15.669513225155248],[58.95003247518379,17.395022634700517],[62.55002992491184,19.95262290516439],[66.60002705585578,19.95262290516439],[70.20002450558383,19.529070924350908],[72.87590260996693,19.07607425728523]],[[62.55002992491184,19.95262290516439],[62.55002992491184,22.469443964829516],[59.85003183761575,24.12261698700435],[58.50003279396771,24.583819112323365],[56.92503390971164,24.89034854048814],[56.33372432860119,25.121690004958644]],[[100.06611334816643,6.613518860854109],[100.0579133539753,6.354447103901104],[99.99248340032653,6.205536229871337],[99.67350362629472,5.956366566270154],[99.00000410340806,5.845915088460266],[97.42500521915215,6.405200795356032]],[[29.8935130590948,31.191465077638455],[30.825052399183495,30.901396088515508],[31.387552000703497,30.708097004575936],[31.9500516022235,30.49024170709155],[32.287551363135464,30.271897570624173],[32.52993119143143,29.972545436050364]],[[12.150065628719313,38.38775473578444],[12.262565549023423,38.21117903702318],[12.262565549023423,36.87321951208928],[12.487565389631278,36.24065523321488],[12.712565230239315,35.876870570092834],[13.500064672367355,35.419780517080355],[14.400064034799321,34.960082324548345],[16.65006244087933,34.49779087043369],[19.350060528175415,34.867831005273345],[22.050058614875596,34.57501887961886],[25.200056383983473,33.846256070003854],[28.800053833711523,32.52821504536491],[29.8935130590948,31.191465077638455],[30.825052399183495,30.828970604876503],[31.387552000703497,30.61132334760356],[31.9500516022235,30.393250512072004],[32.287551363135464,30.223305674181642],[32.54282118230001,29.95909144105574],[32.59687614400701,29.63833609362628],[32.76567602442743,29.344566989489813],[33.04692582518743,28.95155473219332],[33.52527548632113,28.161052262220792],[34.48129980906351,27.364667993860262],[35.43754913164762,26.562513149236715],[36.22504857377548,25.75470426341523],[37.237547856509735,24.12261698700344],[38.47504697985549,22.05298561667754],[39.18275647850768,21.481533475502996]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "southeast-asia-japan-cable-2-sjc2",
                        "name": "Southeast Asia-Japan Cable 2 (SJC2, Planned)",
                        "color": "#ada558"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[103.9870122893147,1.389451396800233],[104.19209042528557,1.276482074072847],[104.28790035741287,1.327893755020881],[104.45655023793971,1.468426767331968],[104.8499999592161,2.817450442654169],[105.74999932164808,4.0527020972683],[107.09999836529612,4.837826391986557],[107.99999772772827,5.510071711803246],[110.69999581502417,7.744889052551447],[111.93749493836829,9.967915186974132],[112.94999422110418,12.615395567393394],[114.52499310476436,17.10851996079568],[114.7499929459683,18.251816319028222],[116.99999135204831,19.529070924350908],[120.14998912056028,20.269544035929588],[121.04998848299225,20.375041253465433],[122.84998720785636,20.90143978523765],[124.87498577332833,22.05298561667754],[125.7749851357603,24.12261698700344],[126.22498481697637,25.55188275942587],[126.67498449819227,26.1593079707739],[128.24998338244836,28.359233526108557],[129.5999824260964,28.75448641587171],[131.39998115096031,29.049948644465697],[134.99997860068837,30.126049846722832],[136.7999773255523,30.901396088515508],[138.59997605041642,32.052708023486204],[139.04997573163232,32.43331330641721],[139.72497525345642,33.93964008831966],[140.23122489482446,34.405022750715936],[140.2030999141525,34.69072647741027],[140.0343500336966,34.852445708846155],[139.9546750907351,34.97672776066548]],[[114.7499929459683,18.251816319028222],[114.29999326475222,20.796306105108872],[114.20309333339704,22.22214038855274]],[[120.14998912056028,20.269544035929588],[120.48748888147225,21.635297384859552],[120.66208875778415,22.249168196123776]],[[112.94999422110418,12.615395567393394],[111.59999517745614,13.273238157547594],[110.02499629320025,13.710817738179635],[109.21959686375268,13.782910441432074]],[[100.5951029728293,7.198818071264419],[101.70000219070414,7.410337121715135],[103.04883123518101,7.563123274145237],[105.29999964043219,6.18155703253704],[107.09999836529612,4.837826391986557]],[[138.59997605041642,32.052708023486204],[137.69997668798445,33.09551711711581],[136.87399727311598,34.33682825203173]],[[129.5999824260964,28.75448641587171],[129.37498258548837,30.901396088515508],[129.1499827448803,31.670513047087127],[129.26248266518442,32.8123187832876],[129.37498258548837,34.31215165223547],[128.999482851496,35.17030187110516]],[[128.24998338244836,28.359233526108557],[127.12498417940834,29.540507745394493],[125.7749851357603,30.320465424761444],[124.6499859327203,30.901396088515508],[122.84998720785636,31.286738814391754],[122.17498768603225,31.142418511463656],[121.89608788360773,30.935661747314708]],[[126.22498481697637,25.55188275942587],[123.74998657028833,25.653336613276053],[122.84998720785636,25.75470426341523],[121.94998784542422,25.653336613276053],[121.4876881729218,25.18162628187736]]]
                    }
                },
                {
                    "type": "Feature",
                    "properties": {
                        "id": "tata-tgn-tata-indicom",
                        "name": "Tata TGN-Tata Indicom",
                        "color": "#4a8078"
                    },
                    "geometry": {
                        "type": "MultiLineString",
                        "coordinates": [[[103.91973061822782,1.172215972443871],[103.98701057056589,1.389451396800233]],[[80.24298739105474,13.06385310188338],[81.45001653598388,12.175887185507976],[83.70001494206389,10.41081650540272],[89.10001111665605,9.08033076823294],[93.1500082476,8.518425924569478],[95.40000665368001,7.521883237406507],[97.42500521915215,6.5728695185769],[99.2250039440161,5.286069860821008],[100.01250338614413,4.613591578862773],[100.57500298766413,3.266814816815666],[101.25000250948806,2.592701464601932],[102.15000187192003,2.086875539277345],[102.68279723997186,1.726894676446862],[103.34065102845322,1.327793781945009],[103.50000091556807,1.243290124212273],[103.91973061822782,1.172215972443871]]]
                    }
                }
            ];

            // ============================================
            // LANDING POINTS DATA (from paste-2.txt)
            // ============================================
            
            const landingPoints = [
                {
                    "properties": {
                        "name": "Agat, Guam"
                    },
                    "geometry": {
                        "coordinates": [144.65753000000052, 13.385309999999615]
                    }
                },
                {
                    "properties": {
                        "name": "Alexandria, Egypt"
                    },
                    "geometry": {
                        "coordinates": [29.889799154879793, 31.191886381300385]
                    }
                },
                {
                    "properties": {
                        "name": "Alupang, Guam"
                    },
                    "geometry": {
                        "coordinates": [144.776754, 13.490037]
                    }
                },
                {
                    "properties": {
                        "name": "Annaba, Algeria"
                    },
                    "geometry": {
                        "coordinates": [7.755439835067562, 36.902343529231146]
                    }
                },
                {
                    "properties": {
                        "name": "Baler, Philippines"
                    },
                    "geometry": {
                        "coordinates": [121.56018214238252, 15.7615293728581]
                    }
                },
                {
                    "properties": {
                        "name": "Batam, Indonesia"
                    },
                    "geometry": {
                        "coordinates": [104.01664054897991, 1.066796188550793]
                    }
                },
                {
                    "properties": {
                        "name": "Batangas, Philippines"
                    },
                    "geometry": {
                        "coordinates": [121.06492987806165, 13.765553306627538]
                    }
                },
                {
                    "properties": {
                        "name": "Bauang, Philippines"
                    },
                    "geometry": {
                        "coordinates": [120.35558309999966, 16.51402480000008]
                    }
                },
                {
                    "properties": {
                        "name": "Bizerte, Tunisia"
                    },
                    "geometry": {
                        "coordinates": [9.867352401468954, 37.276349513656555]
                    }
                },
                {
                    "properties": {
                        "name": "Busan, South Korea"
                    },
                    "geometry": {
                        "coordinates": [128.99929925728011, 35.17014221411413]
                    }
                },
                {
                    "properties": {
                        "name": "Changi, Singapore"
                    },
                    "geometry": {
                        "coordinates": [104.00411409999965, 1.373499297000449]
                    }
                },
                {
                    "properties": {
                        "name": "Changi North, Singapore"
                    },
                    "geometry": {
                        "coordinates": [103.9870122887188, 1.389044778364265]
                    }
                },
                {
                    "properties": {
                        "name": "Changi South, Singapore"
                    },
                    "geometry": {
                        "coordinates": [103.9870122887188, 1.389044778364265]
                    }
                },
                {
                    "properties": {
                        "name": "Cherating, Malaysia"
                    },
                    "geometry": {
                        "coordinates": [103.39365333405976, 4.130238298773818]
                    }
                },
                {
                    "properties": {
                        "name": "Chennai, India"
                    },
                    "geometry": {
                        "coordinates": [80.24308379664043, 13.06348539106232]
                    }
                },
                {
                    "properties": {
                        "name": "Chikura, Japan"
                    },
                    "geometry": {
                        "coordinates": [139.95466259014782, 34.976657744880164]
                    }
                },
                {
                    "properties": {
                        "name": "Chongming, China"
                    },
                    "geometry": {
                        "coordinates": [121.39520308159317, 31.619883221433906]
                    }
                },
                {
                    "properties": {
                        "name": "Chung Hom Kok, China"
                    },
                    "geometry": {
                        "coordinates": [114.2030206766037, 22.222049985803473]
                    }
                },
                {
                    "properties": {
                        "name": "Colombo, Sri Lanka"
                    },
                    "geometry": {
                        "coordinates": [79.87199030952667, 6.926734329228445]
                    }
                },
                {
                    "properties": {
                        "name": "Cox's Bazar, Bangladesh"
                    },
                    "geometry": {
                        "coordinates": [91.99493094027171, 21.42917958893072]
                    }
                },
                {
                    "properties": {
                        "name": "Danang, Vietnam"
                    },
                    "geometry": {
                        "coordinates": [108.21474366875417, 16.051559827539638]
                    }
                },
                {
                    "properties": {
                        "name": "Davao, Philippines"
                    },
                    "geometry": {
                        "coordinates": [125.61277821882337, 7.079988883160643]
                    }
                },
                {
                    "properties": {
                        "name": "Digha, India"
                    },
                    "geometry": {
                        "coordinates": [87.50654093847432, 21.621856500843982]
                    }
                },
                {
                    "properties": {
                        "name": "Eureka, CA, United States"
                    },
                    "geometry": {
                        "coordinates": [-124.159554, 40.803255000000355]
                    }
                },
                {
                    "properties": {
                        "name": "Fangshan, Taiwan"
                    },
                    "geometry": {
                        "coordinates": [120.66209813218148, 22.249258581382197]
                    }
                },
                {
                    "properties": {
                        "name": "Fujairah, United Arab Emirates"
                    },
                    "geometry": {
                        "coordinates": [56.33372573425405, 25.12169311729696]
                    }
                },
                {
                    "properties": {
                        "name": "Grover Beach, CA, United States"
                    },
                    "geometry": {
                        "coordinates": [-120.62142234655879, 35.1206334382351]
                    }
                },
                {
                    "properties": {
                        "name": "Hermosa Beach, CA, United States"
                    },
                    "geometry": {
                        "coordinates": [-118.39954892055475, 33.862232632157735]
                    }
                },
                {
                    "properties": {
                        "name": "Hulhumale, Maldives"
                    },
                    "geometry": {
                        "coordinates": [73.54015885755544, 4.211942635751779]
                    }
                },
                {
                    "properties": {
                        "name": "Jakarta, Indonesia"
                    },
                    "geometry": {
                        "coordinates": [106.82785500280222, -6.171598654655946]
                    }
                },
                {
                    "properties": {
                        "name": "Jeddah, Saudi Arabia"
                    },
                    "geometry": {
                        "coordinates": [39.18276132165815, 21.481258967424996]
                    }
                },
                {
                    "properties": {
                        "name": "Karachi, Pakistan"
                    },
                    "geometry": {
                        "coordinates": [67.02854237669561, 24.88937409747322]
                    }
                },
                {
                    "properties": {
                        "name": "Kauditan, Indonesia"
                    },
                    "geometry": {
                        "coordinates": [125.06561063769091, 1.378623021535939]
                    }
                },
                {
                    "properties": {
                        "name": "Keawaula, HI, United States"
                    },
                    "geometry": {
                        "coordinates": [-158.2420376129735, 21.548768815961424]
                    }
                },
                {
                    "properties": {
                        "name": "Kuala Sedili, Malaysia"
                    },
                    "geometry": {
                        "coordinates": [104.11414260000058, 1.925879632999907]
                    }
                },
                {
                    "properties": {
                        "name": "La Union, Philippines"
                    },
                    "geometry": {
                        "coordinates": [120.38963738769527, 16.582590683428545]
                    }
                },
                {
                    "properties": {
                        "name": "Lantau Island, China"
                    },
                    "geometry": {
                        "coordinates": [113.94833335702553, 22.271491582355683]
                    }
                },
                {
                    "properties": {
                        "name": "Lingang, China"
                    },
                    "geometry": {
                        "coordinates": [121.89608163301598, 30.935661747314708]
                    }
                },
                {
                    "properties": {
                        "name": "Lingshui, China"
                    },
                    "geometry": {
                        "coordinates": [110.04937200000029, 18.389897000000236]
                    }
                },
                {
                    "properties": {
                        "name": "Luna, Philippines"
                    },
                    "geometry": {
                        "coordinates": [120.35484390000022, 16.830712289999493]
                    }
                },
                {
                    "properties": {
                        "name": "Machilipatnam, India"
                    },
                    "geometry": {
                        "coordinates": [81.13951857354486, 16.175049115204825]
                    }
                },
                {
                    "properties": {
                        "name": "Magachgil, Yap, Micronesia"
                    },
                    "geometry": {
                        "coordinates": [138.06149986878208, 9.443922836169385]
                    }
                },
                {
                    "properties": {
                        "name": "Makaha, HI, United States"
                    },
                    "geometry": {
                        "coordinates": [-158.2206478576183, 21.463431186887963]
                    }
                },
                {
                    "properties": {
                        "name": "Manado, Indonesia"
                    },
                    "geometry": {
                        "coordinates": [124.83960982123124, 1.490831387793467]
                    }
                },
                {
                    "properties": {
                        "name": "Maruyama, Japan"
                    },
                    "geometry": {
                        "coordinates": [139.97546699999984, 35.005432999999265]
                    }
                },
                {
                    "properties": {
                        "name": "Marseille, France"
                    },
                    "geometry": {
                        "coordinates": [5.372629023073098, 43.29316463678684]
                    }
                },
                {
                    "properties": {
                        "name": "Matara, Sri Lanka"
                    },
                    "geometry": {
                        "coordinates": [80.53986093015084, 5.940833037393244]
                    }
                },
                {
                    "properties": {
                        "name": "Melaka, Malaysia"
                    },
                    "geometry": {
                        "coordinates": [102.22090025859913, 2.273178376445331]
                    }
                },
                {
                    "properties": {
                        "name": "Mersing, Malaysia"
                    },
                    "geometry": {
                        "coordinates": [103.84990301084824, 2.295511672819276]
                    }
                },
                {
                    "properties": {
                        "name": "Minamiboso, Japan"
                    },
                    "geometry": {
                        "coordinates": [139.9609790000003, 34.9740779999996]
                    }
                },
                {
                    "properties": {
                        "name": "Morib, Malaysia"
                    },
                    "geometry": {
                        "coordinates": [101.4436141980139, 2.751191204441439]
                    }
                },
                {
                    "properties": {
                        "name": "Morro Bay, CA, United States"
                    },
                    "geometry": {
                        "coordinates": [-120.84720343661348, 35.3666813511006]
                    }
                },
                {
                    "properties": {
                        "name": "Mumbai, India"
                    },
                    "geometry": {
                        "coordinates": [72.87590151562159, 19.07579693373203]
                    }
                },
                {
                    "properties": {
                        "name": "Nanhui, China"
                    },
                    "geometry": {
                        "coordinates": [121.92506915087795, 30.864713861582327]
                    }
                },
                {
                    "properties": {
                        "name": "Ngeremlengui, Palau"
                    },
                    "geometry": {
                        "coordinates": [134.56094082517401, 7.531746239289517]
                    }
                },
                {
                    "properties": {
                        "name": "Palermo, Italy"
                    },
                    "geometry": {
                        "coordinates": [13.358365553402518, 38.12150089552133]
                    }
                },
                {
                    "properties": {
                        "name": "Piti, Guam"
                    },
                    "geometry": {
                        "coordinates": [144.69474214461212, 13.464655237903562]
                    }
                },
                {
                    "properties": {
                        "name": "Quy Nhon, Vietnam"
                    },
                    "geometry": {
                        "coordinates": [109.21965018343205, 13.782957863531687]
                    }
                },
                {
                    "properties": {
                        "name": "Rosarito, Mexico"
                    },
                    "geometry": {
                        "coordinates": [-117.06377809999996, 32.357601899999985]
                    }
                },
                {
                    "properties": {
                        "name": "Satun, Thailand"
                    },
                    "geometry": {
                        "coordinates": [100.06611799999914, 6.613467]
                    }
                },
                {
                    "properties": {
                        "name": "Shantou, China"
                    },
                    "geometry": {
                        "coordinates": [116.67547986258927, 23.354554663214007]
                    }
                },
                {
                    "properties": {
                        "name": "Shima, Japan"
                    },
                    "geometry": {
                        "coordinates": [136.87439133474103, 34.33683057441225]
                    }
                },
                {
                    "properties": {
                        "name": "Songkhla, Thailand"
                    },
                    "geometry": {
                        "coordinates": [100.5951000000003, 7.198819999999446]
                    }
                },
                {
                    "properties": {
                        "name": "Sriracha, Thailand"
                    },
                    "geometry": {
                        "coordinates": [100.93056914143179, 13.174368777461584]
                    }
                },
                {
                    "properties": {
                        "name": "Suez, Egypt"
                    },
                    "geometry": {
                        "coordinates": [32.53012931569517, 29.9722883988634]
                    }
                },
                {
                    "properties": {
                        "name": "Tanguisson Point, Guam"
                    },
                    "geometry": {
                        "coordinates": [144.80934665104422, 13.549098008782185]
                    }
                },
                {
                    "properties": {
                        "name": "Tanjung Pakis, Indonesia"
                    },
                    "geometry": {
                        "coordinates": [107.12089678739565, -5.981255891395774]
                    }
                },
                {
                    "properties": {
                        "name": "Tanshui, Taiwan"
                    },
                    "geometry": {
                        "coordinates": [121.46258584635854, 25.18136115573805]
                    }
                },
                {
                    "properties": {
                        "name": "Toucheng, Taiwan"
                    },
                    "geometry": {
                        "coordinates": [121.80145279380189, 24.863592858849902]
                    }
                },
                {
                    "properties": {
                        "name": "Tseung Kwan O, China"
                    },
                    "geometry": {
                        "coordinates": [114.25868469966966, 22.31829585896108]
                    }
                },
                {
                    "properties": {
                        "name": "Tuas, Singapore"
                    },
                    "geometry": {
                        "coordinates": [103.64707112328632, 1.338192522185158]
                    }
                },
                {
                    "properties": {
                        "name": "Tungku, Brunei"
                    },
                    "geometry": {
                        "coordinates": [114.88583269289208, 4.926371091877179]
                    }
                },
                {
                    "properties": {
                        "name": "Vung Tau, Vietnam"
                    },
                    "geometry": {
                        "coordinates": [107.07919759818566, 10.341846070577743]
                    }
                },
                {
                    "properties": {
                        "name": "Winema, OR, United States"
                    },
                    "geometry": {
                        "coordinates": [-123.97340470108611, 45.146590041565254]
                    }
                }
            ];

            // Function to create cable layer
            // Function to create cable layer
            function createCableLayer(cable) {
                // Check if this is a planned cable
                const isPlanned = ['echo', 'bifrost', 'asia-link-cable-alc', 'apricot', 'southeast-asia-japan-cable-2-sjc2'].includes(cable.properties.id);
                
                // Use Leaflet.antimeridian to handle date line crossing
                const cableLayer = L.geoJSON(cable, {
                    style: {
                        color: cable.properties.color || '#4eb748',
                        weight: 3,
                        opacity: 0.8,
                        smoothFactor: 1,
                        dashArray: isPlanned ? '10, 10' : null
                    },
                    coordsToLatLng: function(coords) {
                        return L.latLng(coords[1], L.Util.wrapNum(coords[0], [-180, 180], true));
                    }
                });
                
                // Apply antimeridian wrapping if available
                if (typeof L.Wrapped !== 'undefined') {
                    cableLayer.eachLayer(function(layer) {
                        if (layer instanceof L.Polyline) {
                            layer.options.wrap = true;
                            layer._setLatLngs(layer.getLatLngs());
                        }
                    });
                }
                                    
                // Add interactivity
                cableLayer.eachLayer(function(layer) {
                    // Add tooltip
                    layer.bindTooltip(cable.properties.name, {
                        permanent: false,
                        direction: 'top',
                        className: 'cable-tooltip'
                    });
                    
                    // Hover effects
                    layer.on('mouseover', function(e) {
                        layer.setStyle({
                            weight: 5,
                            opacity: 1
                        });
                    });
                    
                    layer.on('mouseout', function(e) {
                        layer.setStyle({
                            weight: 3,
                            opacity: 0.8
                        });
                    });
                });
                
                return cableLayer;
            }
            
            // Function to create custom triangle icon
            function createTriangleIcon() {
                return L.divIcon({
                    html: '<div style="width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 8px solid #2d00c8; transform: rotate(135deg);"></div>',
                    className: '',  // Add this line to remove default Leaflet styling
                    iconSize: [8, 8],
                    iconAnchor: [4, 4]
                });
            }
            
            // Function to create landing point markers
            function createLandingPointMarker(point) {
                const coords = point.geometry.coordinates;
                const marker = L.marker(
                    [coords[1], coords[0]], // Leaflet uses [lat, lng]
                    {
                        icon: createTriangleIcon()
                    }
                );
                // List of points to hide names for
                const hideNames = ['Hulhumale', 'Matara', 'Machilipatnam', 'Digha', "Cox's Bazar", 'Tanjung Pakis', 
                                   'Tungku', 'Vung Tau', 'Songkhla', 'Danang', 'Lingshui', 'Shantou', 
                                   'Fangshan', 'Shima', 'Chongming', 'Morib', 'Melaka', 'Satun', 
                                   'Baler', 'Luna', 'La Union', 'Bauang'];
                
                // List of points to completely remove
                const removePoints = ['Kauditan', 'Mersing', 'Changi', 'Changi North', 'Tanshui', 
                                      'Nanhui', 'Chikura', 'Minamiboso', 'Karachi', 'Cherating', 
                                      'Ngeremlengui', 'Magachgil', 'Quy Nhon', 'Chung Hom Kok', 
                                      'Tseung Kwan O', 'Agat', 'Alupang', 'Tanguisson Point',
                                      'Toucheng', 'Colombo', 'Batangas', 'Makaha', 'Morro Bay', 'Hermosa Beach'];
                
                // Country codes mapping
                const countryCodes = {
                    'Malaysia': 'MYS', 'Singapore': 'SGP', 'Indonesia': 'IDN', 
                    'Philippines': 'PHL', 'Japan': 'JPN', 'China': 'CHN',
                    'Thailand': 'THA', 'Vietnam': 'VNM', 'India': 'IND',
                    'Sri Lanka': 'LKA', 'Bangladesh': 'BGD', 'South Korea': 'KOR',
                    'United States': 'USA', 'Mexico': 'MEX', 'Guam': 'USA'
                };
                
                // Parse name
                const parts = point.properties.name.split(', ');
                const location = parts[0];
                const country = parts.slice(1).join(', ');
                if (country.includes('United States')) {
                    country = 'United States';
                }
                // Check if we should skip this point entirely
                if (removePoints.some(name => location.includes(name))) {
                    return null;
                }
                
                // Rename specific locations
                let displayName = location;
                let displayCountry = country;
                if (location === 'Manado') displayName = 'Manado';
                if (location === 'Davao') displayName = 'Davao';
                if (location === 'Tuas') displayName = 'Singapore';
                if (location === 'Toucheng') displayName = 'Taiwan';
                if (location === 'Lingang') displayName = 'Shanghai';
                if (location === 'Maruyama') displayName = 'Tokyo';
                if (location === 'Piti') {
                    displayName = 'Guam';
                    displayCountry = 'United States';
                }
                if (location === 'Keawaula') {
                    displayName = 'Hawaii';
                    displayCountry = 'USA';
                }
                if (location.includes('Chung Hom Kok') || location.includes('Tseung Kwan O') || location.includes('Lantau')) {
                    displayName = 'Hong Kong';
                    displayCountry = 'China';
                }
                if (['Agat', 'Alupang', 'Piti', 'Tanguisson Point'].includes(location)) {
                    displayName = 'Guam';
                    displayCountry = 'Guam';
                }
                if (location === 'Kuala Sedili') displayName = 'Sedili';
                
                // Add country code
                const countryCode = countryCodes[displayCountry] || '';
                const fullDisplayName = countryCode ? `${displayName}, ${countryCode}` : displayName;
                
                // Check if we should hide the name
                const shouldHideName = hideNames.some(name => location.includes(name));
                // List of major cities that should have bigger labels
                const majorCities = ['Hong Kong', 'Singapore', 'Tokyo', 'Shanghai', 'Manado', 'Davao', 'Mumbai', 'Chennai', 'Jakarta', 'Batam', 'Sedili', 'Guam', 'Busan', 'Grover Beach', 'Rosarito', 'Eureka', 'Winema', 'Hawaii'];                const isMajorCity = majorCities.includes(displayName);
                // Add tooltip only if not hiding name
                if (!shouldHideName) {
                    marker.bindTooltip(
                        `<div class="landing-name">${fullDisplayName}</div>`,
                        {
                            permanent: false,
                            direction: 'top',
                            offset: [0, -10],
                            className: 'landing-tooltip'
                        }
                    );
                }
                
                // Add permanent label only if not hiding name
                // Add permanent label only if not hiding name
                let labelMarker = null;
                if (!shouldHideName) {
                    const label = L.divIcon({
                        html: `<div class="landing-label${isMajorCity ? ' major-city' : ''}">${fullDisplayName}</div>`,
                        className: 'landing-label-icon',
                        iconSize: null,
                        iconAnchor: [-10, 0]
                    });
                    
                    // Apply position offsets for overlapping cities
                    let labelLat = coords[1];
                    let labelLng = coords[0];
                    
                    if (displayName === 'Sedili') {
                        // Move right and up a tiny bit
                        labelLng += 0.15;  // right
                        labelLat += 0.60;  // up
                    } else if (displayName === 'Singapore') {
                        // Move just to the right a tiny bit
                        labelLng += 0.28;  // right
                        labelLat += 0.20;  // up
                    } else if (location === 'Batam') {
                        // Move down a medium bit
                        labelLat -= 0.4;   // down
                    }
                    
                    labelMarker = L.marker([labelLat, labelLng], {
                        icon: label,
                        interactive: false
                    });
                }
                
                return {marker: marker, label: labelMarker};
            }
            
            // Create legend item
            function createLegendItem(cable) {
                const item = document.createElement('div');
                item.className = 'cable-item';
                item.dataset.cableId = cable.properties.id;
                
                const colorBox = document.createElement('div');
                colorBox.className = 'cable-color';
                
                // Check if this is a planned cable
                const isPlanned = ['echo', 'bifrost', 'asia-link-cable-alc', 'apricot', 'southeast-asia-japan-cable-2-sjc2'].includes(cable.properties.id);
                
                if (isPlanned) {
                    // Create dashed line using gradient
                    colorBox.style.background = `repeating-linear-gradient(90deg, ${cable.properties.color || '#4eb748'} 0px, ${cable.properties.color || '#4eb748'} 6px, transparent 6px, transparent 12px)`;
                } else {
                    // Solid color for existing cables
                    colorBox.style.backgroundColor = cable.properties.color || '#4eb748';
                }
                
                const name = document.createElement('div');
                name.className = 'cable-name';
                name.textContent = cable.properties.name;
                
                item.appendChild(colorBox);
                item.appendChild(name);
                
                // Click to toggle visibility
                item.addEventListener('click', function() {
                    const cableId = this.dataset.cableId;
                    const layer = cableLayers[cableId];
                    
                    if (map.hasLayer(layer)) {
                        map.removeLayer(layer);
                        this.classList.add('hidden');
                    } else {
                        map.addLayer(layer);
                        this.classList.remove('hidden');
                    }
                });
                
                return item;
            }
            
            // Initialize map with data
            const cableList = document.getElementById('cable-list');
            
            // Add all cables
            cables.forEach(cable => {
                console.log('Adding cable:', cable.properties.name);
                const layer = createCableLayer(cable);
                cableLayers[cable.properties.id] = layer;
                layer.addTo(map);
                
                const legendItem = createLegendItem(cable);
                cableList.appendChild(legendItem);
            });
            
            // Add all landing points
            console.log('Adding', landingPoints.length, 'landing points');
            const landingPointGroup = L.layerGroup();
            const landingLabelGroup = L.layerGroup();
            
            landingPoints.forEach(point => {
                const result = createLandingPointMarker(point);
                if (result) {
                    const {marker, label} = result;
                    landingPointGroup.addLayer(marker);
                    if (label) {
                        landingLabelGroup.addLayer(label);
                    }
                }
            });
            
            landingPointGroup.addTo(map);
            landingLabelGroup.addTo(map);
            
            console.log('Map initialization complete!');
        }
    </script>
</body>
</html>
